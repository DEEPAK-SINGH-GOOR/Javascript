<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopping Cart</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        .cart-item {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
            border-bottom: 1px solid #ddd;
            padding-bottom: 1rem;
        }
        .cart-item img {
            width: 100px;
            height: auto;
            margin-right: 1rem;
        }
        .cart-item .item-details {
            flex: 1;
        }
        .cart-item .item-details h5 {
            margin: 0;
        }
        .cart-item .quantity-controls {
            display: flex;
            align-items: center;
        }
        .cart-item .quantity-controls button {
            margin: 0 0.5rem;
        }
        .cart-item .item-price {
            margin-left: 1rem;
        }
        .cart-item .remove-item {
            color: red;
            cursor: pointer;
            margin-left: 1rem;
        }
        .total-price {
            font-weight: bold;
            margin-top: 1rem;
        }
    </style>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <!-- Navbar content as before -->
    </nav>
    <div class="container-fluid">
        <h1 class="mt-4">Your Cart</h1>
        <div id="cartItems"></div>
        <div class="total-price" id="totalPrice">Total Price: $0.00</div>
    </div>

    <script>
        function loadCart() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const cartItemsContainer = document.getElementById('cartItems');
            cartItemsContainer.innerHTML = '';
            
            let totalPrice = 0;
            cart.forEach((item, index) => {
                totalPrice += item.totalPrice;

                const cartItemHTML = `
                    <div class="cart-item">
                        <img src="${item.img}" alt="${item.cardTitle}">
                        <div class="item-details">
                            <h5>${item.cardTitle}</h5>
                            <p>${item.price}</p>
                            <div class="quantity-controls">
                                <button onclick="changeQuantity(${index}, -1)">-</button>
                                <span id="quantity${index}">${item.quantity}</span>
                                <button onclick="changeQuantity(${index}, 1)">+</button>
                                <span class="item-price">$${item.totalPrice}</span>
                                <span class="remove-item" onclick="removeItem(${index})"><i class="fa-solid fa-trash"></i></span>
                            </div>
                        </div>
                    </div>
                `;
                cartItemsContainer.insertAdjacentHTML('beforeend', cartItemHTML);
            });

            document.getElementById('totalPrice').textContent = `Total Price: $${totalPrice.toFixed(2)}`;
        }

        function changeQuantity(index, change) {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const item = cart[index];
            if (item) {
                item.quantity += change;
                if (item.quantity <= 0) {
                    removeItem(index);
                } else {
                    item.totalPrice = (item.price * item.quantity).toFixed(2);
                    localStorage.setItem('cart', JSON.stringify(cart));
                    loadCart();
                }
            }
        }

        function removeItem(index) {
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            if (index >= 0 && index < cart.length) {
                cart.splice(index, 1);
                localStorage.setItem('cart', JSON.stringify(cart));
                loadCart();
            }
        }

        loadCart();
    </script>
</body>

</html>
